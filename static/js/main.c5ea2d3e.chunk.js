(this["webpackJsonpposting-app"]=this["webpackJsonpposting-app"]||[]).push([[0],{113:function(e,t,n){},114:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(34),s=n.n(a),i=(n(113),n(13)),o=(n(114),n(18)),u=n.n(o),l=n(25),d=function(e){return fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(t){var n=t.find((function(t){return t.email===e.email}));return!(!n||n.username!==e.password)&&{id:n.id,name:n.name,username:n.username,email:n.email}}))},j=n(175),p=n(183),b=n(165),h=n(171),m=n(182),f=n(172),x=n(184),O=n(176),v=n(180),y=n(87),g=n.n(y),w=n(61),k=n(179),I=n(91),S=n(178),C=n(2),F=Object(I.a)();function P(e){var t=e.setUser,n=function(){var e=Object(l.a)(u.a.mark((function e(n){var r,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=new FormData(n.currentTarget),c={email:r.get("email"),password:r.get("password")},e.next=5,d(c);case 5:(a=e.sent)&&t(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(S.a,{theme:F,children:Object(C.jsxs)(k.a,{component:"main",maxWidth:"xs",children:[Object(C.jsx)(b.a,{}),Object(C.jsxs)(v.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(j.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(C.jsx)(g.a,{})}),Object(C.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(C.jsxs)(v.a,{component:"form",onSubmit:n,sx:{mt:1},children:[Object(C.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(C.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(C.jsx)(m.a,{control:Object(C.jsx)(f.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(C.jsx)(p.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:!0,children:Object(C.jsx)(x.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(C.jsx)(O.a,{item:!0,children:Object(C.jsx)(x.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})})}var T=n(185),D=n(186),E=n(187),W=n(88),U=n.n(W),A=n(177),q=n(90);function z(e){var t=e.setUser,n=e.isAuth,c=r.useState(null),a=Object(i.a)(c,2),s=a[0],o=a[1],u=function(){o(null)};return Object(C.jsx)(v.a,{sx:{flexGrow:1},children:Object(C.jsx)(T.a,{position:"static",children:Object(C.jsxs)(D.a,{children:[Object(C.jsx)(w.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"The new awesome crazy test app"}),n&&Object(C.jsxs)("div",{children:[Object(C.jsx)(E.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:Object(C.jsx)(U.a,{})}),Object(C.jsxs)(q.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(s),onClose:u,children:[Object(C.jsx)(A.a,{onClick:u,children:"Profile"}),Object(C.jsx)(A.a,{onClick:function(){return t(null)},children:"Logout"})]})]})]})})})}var J=n(15),L=function(e){return fetch("https://jsonplaceholder.typicode.com/posts/".concat(e),{method:"DELETE"})},M=n(181),B=n(173),N=n(169),G=n(168),R=n(188),V=n(170),H=function(e){return fetch("https://jsonplaceholder.typicode.com/posts/".concat(e,"/comments")).then((function(e){return e.json()}))};function K(e){var t=e.comment,n=(e.users,e.username);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(B.a,{alignItems:"flex-start",padding:"0",style:{padding:"1px"},children:Object(C.jsx)(G.a,{style:{color:"#212121"},primary:t.name,secondary:Object(C.jsxs)(c.a.Fragment,{children:[Object(C.jsx)(w.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:n})," - "+t.body]})})}),Object(C.jsx)(N.a,{})]})}function Q(e){var t=e.postId,n=e.users,c=Object(r.useState)([]),a=Object(i.a)(c,2),s=a[0],o=a[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,H(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var d=s.map((function(e){var t,r=(null===(t=n.find((function(t){return t.email===e.email})))||void 0===t?void 0:t.username)||"unknown";return Object(C.jsx)(K,{comment:e,users:n,username:r},e.id)}));return Object(C.jsx)(M.a,{sx:{width:"100%",margin:"0 auto",maxWidth:"80%",bgcolor:"background.paper"},children:d})}var X=Object(I.a)();function Y(e){var t=e.postId,n=void 0===t?null:t,r=e.userId,c=e.title,a=void 0===c?"":c,s=e.body,i=void 0===s?"":s,o=e.submitPost,d=e.cancel,j=function(){var e=Object(l.a)(u.a.mark((function e(t){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c=new FormData(t.currentTarget),a={id:n,title:c.get("title"),body:c.get("content"),userId:r},o(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(S.a,{theme:X,children:Object(C.jsx)(k.a,{component:"main",style:{padding:"0",width:"75%"},children:Object(C.jsx)(v.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:Object(C.jsxs)(v.a,{component:"form",onSubmit:j,sx:{mt:1,width:"100%"},children:[Object(C.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,id:"title",name:"title",label:"title",defaultValue:a,autoFocus:!0}),Object(C.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,id:"content",name:"content",label:"content",defaultValue:i,rows:"5",multiline:!0}),Object(C.jsxs)(v.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",mt:3,mb:2},children:[Object(C.jsx)(p.a,{type:"button",variant:"contained",color:"error",onClick:d,children:"Cancel"}),Object(C.jsx)(p.a,{type:"submit",variant:"contained",color:"success",children:"Send"})]})]})})})})}function Z(e){var t=e.post,n=e.users,a=e.postOwner,s=e.user,o=e.deletePost,u=e.updatePost,l=Object(r.useState)(!1),d=Object(i.a)(l,2),p=d[0],b=d[1],h=Object(r.useState)(!1),m=Object(i.a)(h,2),f=m[0],x=m[1],O=a.id===s.id;return Object(C.jsxs)(C.Fragment,{children:[" ",f?Object(C.jsx)(Y,{postId:t.id,userId:s.id,title:t.title,body:t.body,submitPost:function(e){u(e),x(!1)},cancel:function(){return x(!1)}}):Object(C.jsxs)(B.a,{alignItems:"flex-start",children:[Object(C.jsx)(R.a,{children:Object(C.jsx)(j.a,{alt:"Remy Sharp",src:"https://i.pravatar.cc/150?img=".concat(t.userId)})}),Object(C.jsx)(G.a,{primary:t.title,secondary:Object(C.jsxs)(c.a.Fragment,{children:[Object(C.jsx)(w.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:a.username})," - "+t.body,Object(C.jsx)("br",{}),Object(C.jsxs)("span",{onClick:function(){return b(!p)},style:{margin:0,color:"#1976d2"},children:[p?"close":"open"," comments"]})]})}),O&&Object(C.jsxs)("div",{children:[Object(C.jsx)(V.a,{onClick:function(){return x(!0)},children:"Edit"}),Object(C.jsx)(V.a,{onClick:o,children:"Delete"})]})]}),p&&Object(C.jsx)(Q,{postId:t.id,users:n}),Object(C.jsx)(N.a,{})]})}function $(e){var t=e.user,n=Object(r.useState)(null),c=Object(i.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)([]),d=Object(i.a)(o,2),j=d[0],b=d[1],h=Object(r.useState)(!1),m=Object(i.a)(h,2),f=m[0],x=m[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()}));case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=b,e.next=8,fetch("https://jsonplaceholder.typicode.com/posts").then((function(e){return e.json()}));case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var O=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b,e.next=3,n=t,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify({title:n.title,body:n.body,userId:n.userId}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}));case 3:e.t1=e.sent,e.t2=[e.t1].concat(Object(J.a)(j)),(0,e.t0)(e.t2),x(!1);case 7:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,fetch("https://jsonplaceholder.typicode.com/posts/".concat(r.id),{method:"PUT",body:JSON.stringify({id:r.id,title:r.title,body:r.body,userId:r.userId}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}));case 2:(n=e.sent)&&b(j.map((function(e){return e.id===n.id?n:e})));case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:if(e.t0=e.sent.ok,!e.t0){e.next=5;break}b(j.filter((function(e){return e.id!==t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=j.map((function(e){var n=a.find((function(t){return t.id===e.userId}));return Object(C.jsx)(Z,{post:e,users:a,user:t,postOwner:n,deletePost:function(){return y(e.id)},updatePost:v},e.id+Math.floor(999999*Math.random()))})),w=Object(C.jsx)("div",{style:{textAlign:"right",maxWidth:"80%",margin:"10px auto"},children:Object(C.jsx)(p.a,{onClick:function(){return x(!0)},color:"secondary",children:"add Post"})});return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"Posts"}),f?Object(C.jsx)(Y,{userId:t.id,submitPost:O,cancel:function(){return x(!1)}}):w,Object(C.jsx)(M.a,{sx:{width:"100%",margin:"0 auto",maxWidth:"80%",bgcolor:"background.paper"},children:g})]})}var _=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(z,{setUser:c,isAuth:!!n}),(null===n||void 0===n?void 0:n.id)?Object(C.jsx)($,{user:n}):Object(C.jsx)(P,{setUser:c})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,190)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(_,{})}),document.getElementById("root")),ee()}},[[122,1,2]]]);
//# sourceMappingURL=main.c5ea2d3e.chunk.js.map